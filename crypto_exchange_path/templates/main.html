<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="{{ url_for('static', filename='img/Bitcoin_logo.png') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="{{ url_for('static', filename='css/mdb.min.css') }}" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">

    {% if title %}
        <title>Crypto Exchange Path - {{ title }}</title>
    {% else %}
        <title>Crypto Exchange Path</title>
    {% endif %}
</head>



<body>

    <div class="mask rgba-black-strong">

        <!--Main Navigation-->
        <header class="site-header">

            <nav class="navbar navbar-expand-sm navbar-dark fixed-top scrolling-navbar">
                <div class="container">
                    <a class="navbar-brand" href="{{ url_for('main') }}">Crypto Exchange Path</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarToggle">
                        <!-- Navbar Right Side -->
                        <div class="navbar-nav ml-auto mr-3">
                            <a class="nav-item nav-link" href="#" data-toggle="modal" data-target="#modalFeedbackForm">Feedback</a>
                        </div>
                        <div id="currency-btn" class="btn-group">
                            {% if curr == 'USD' %}
                                <button class="btn btn-dark-grey dropdown-toggle" data-currency="USD" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b><i class="fa fa-dollar mx-2" aria-hidden="true"></i>USD</b></button>
                            {% elif curr == 'CNY' %}
                                <button class="btn btn-dark-grey dropdown-toggle" data-currency="CNY" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b><i class="fa fa-cny mx-2" aria-hidden="true"></i>CNY</b></button>
                            {% elif curr == 'GBP' %}
                                <button class="btn btn-dark-grey dropdown-toggle" data-currency="GBP" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b><i class="fa fa-gbp mx-2" aria-hidden="true"></i>GBP</b></button>
                            {% elif curr == 'JPY' %}
                                <button class="btn btn-dark-grey dropdown-toggle" data-currency="JPY" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b><i class="fa fa-jpy mx-2" aria-hidden="true"></i>JPY</b></button>
                            {% elif curr == 'EUR' %}
                                <button class="btn btn-dark-grey dropdown-toggle" data-currency="EUR" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b><i class="fa fa-eur mx-2" aria-hidden="true"></i>EUR</b></button>
                            {% else %}
                                <button class="btn btn-dark-grey dropdown-toggle" data-currency="WON" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b><i class="fa fa-won mx-2" aria-hidden="true"></i>WON</b></button>
                            {% endif %}
                            </button>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" data-currency="USD" href="#"><i class="fa fa-dollar mx-2" aria-hidden="true"></i>USD</a>
                                <a class="dropdown-item" data-currency="CNY" href="#"><i class="fa fa-cny mx-2" aria-hidden="true"></i>CNY</a>
                                <a class="dropdown-item" data-currency="GBP" href="#"><i class="fa fa-gbp mx-2" aria-hidden="true"></i>GBP</a>
                                <a class="dropdown-item" data-currency="JPY" href="#"><i class="fa fa-jpy mx-2" aria-hidden="true"></i>JPY</a>
                                <a class="dropdown-item" data-currency="EUR" href="#"><i class="fa fa-euro mx-2" aria-hidden="true"></i>EUR</a>
                                <a class="dropdown-item" data-currency="KRW" href="#"><i class="fa fa-won ml-2 mr-1" aria-hidden="true"></i>KRW</a>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

        </header>


        <!--Main layout-->
        <main role="main">


            <!--Section: Search Card-->
            <section id="search-canvas">
                <div class="container py-2 py-md-3">
                    <div class="row no-gutters d-flex justify-content-center">
                        <div class="col-12 col-md-10 col-lg-11 col-xl-9">


                                <form id="search-form" method="POST" action="{{ url_for('main', session_id=session_id) }}">
                                    {{ form.hidden_tag() }}
                                    <div class="row d-flex justify-content-between no-gutters">
                                        <!-- <fieldset class="form-group"> -->
                                            <div class="col-12 col-lg-6 mb-2">
                                                <p class="font-weight-bold mb-0 mb-lg-1">From</p>
                                                <div class="row d-flex justify-content-start no-gutters pr-lg-4">
                                                    <!-- Currency (HIDDEN TO USER) -->
                                                    <div class="col-12 d-none">
                                                        <div class="form-group mb-0">
                                                            {{ form.currency(class="form-control", type="text", placeholder="Location", autocomplete="off") }}
                                                        </div>
                                                    </div>
                                                    <!-- Origin amount -->
                                                    <div class="col-4 pr-1 pr-sm-2">
                                                        <div class="form-group mb-0">
                                                            {% if form.orig_amt.errors %}
                                                                {{ form.orig_amt(class="form-control is-invalid", autocomplete="off", spellcheck="false") }}
                                                                <div class="invalid-feedback">
                                                                    {% for error in form.orig_amt.errors %}
                                                                        <span>{{ error }}</span>
                                                                    {% endfor %}
                                                                </div>
                                                            {% else %}
                                                                {{ form.orig_amt(class="form-control", placeholder="Amount", autocomplete="off", spellcheck="false") }}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <!-- Origin coin -->
                                                    <div class="col-4 pr-1 pr-sm-2">
                                                        <div id="input-orig-coin" class="form-group mb-0">
                                                            {% if form.orig_coin.errors %}
                                                                {{ form.orig_coin(class="form-control typeahead is-invalid", type="text", autocomplete="off", spellcheck="false") }}
                                                                <div class="invalid-feedback">
                                                                    {% for error in form.orig_coin.errors %}
                                                                        <span>{{ error }}</span>
                                                                    {% endfor %}
                                                                </div>
                                                            {% else %}
                                                                {{ form.orig_coin(class="form-control typeahead", type="text", placeholder="Coin", autocomplete="off", spellcheck="false") }}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <!-- Origin location -->
                                                    <div class="col-4 pr-1 pr-sm-2">
                                                        <div class="form-group mb-0">
                                                            {% if form.orig_loc.errors %}
                                                                {{ form.orig_loc(class="form-control is-invalid", type="text", autocomplete="off", spellcheck="false") }}
                                                                <div class="invalid-feedback">
                                                                    {% for error in form.orig_loc.errors %}
                                                                        <span>{{ error }}</span>
                                                                    {% endfor %}
                                                                </div>
                                                            {% else %}
                                                                {{ form.orig_loc(class="form-control", type="text", placeholder="Location", autocomplete="off", spellcheck="false") }}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-8 col-lg-4 mb-2">
                                                <p class="font-weight-bold mb-0 mb-lg-1">To</p>
                                                <div class="row d-flex justify-content-start no-gutters">
                                                    <!-- Destination coin -->
                                                    <div class="col-6 pr-1 pr-sm-2">
                                                        <div id="input-dest-coin" class="form-group mb-0">
                                                            {% if form.dest_coin.errors %}
                                                                {{ form.dest_coin(class="form-control typeahead is-invalid", type="text", autocomplete="off", spellcheck="false") }}
                                                                <div class="invalid-feedback">
                                                                    {% for error in form.dest_coin.errors %}
                                                                        <span>{{ error }}</span>
                                                                    {% endfor %}
                                                                </div>
                                                            {% else %}
                                                                {{ form.dest_coin(class="form-control typeahead", type="text", placeholder="Coin", autocomplete="off", spellcheck="false") }}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <!-- Destination location -->
                                                    <div class="col-6 pr-1 pr-sm-2">
                                                        <div class="form-group mb-0">
                                                            {% if form.dest_loc.errors %}
                                                                {{ form.dest_loc(class="form-control is-invalid", type="text", autocomplete="off", spellcheck="false") }}
                                                                <div class="invalid-feedback">
                                                                    {% for error in form.dest_loc.errors %}
                                                                        <span>{{ error }}</span>
                                                                    {% endfor %}
                                                                </div>
                                                            {% else %}
                                                                {{ form.dest_loc(class="form-control", type="text", placeholder="Destination", autocomplete="off", spellcheck="false") }}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <!-- </fieldset> -->
                                            <div class="col-4 col-lg-2 d-flex justify-content-center align-items-start" style="margin-top: 1.7rem">
                                                <div class="form-group mb-0">
                                                    {{ form.search_submit(id="submit-btn", class="btn btn-blue-grey m-0") }}
                                                </div>
                                            </div>
                                        </div>





                                <!-- Connecting Options -->
                                <div class="row no-gutters mt-1 mt-lg-2">
                                    <div class="col d-flex justify-content-start">
                                        <a class="text-white" data-toggle="collapse" href="#options-collapse" role="button" aria-expanded="false" aria-controls="options-collapse"><span>Connecting options<i class="fa fa-chevron-down px-2" aria-hidden="true"></i></span></a>
                                    </div>
                                </div>
                                <div id="options-collapse" class="collapse my-2">
                                    <div id="options" class="row pt-2">
                                        <div class="col">
                                            <!-- Connections radio button -->
                                            <div class="row">
                                                <div class="col-auto pr-0">
                                                    <p class="font-weight-bold fixed-min-width">Connections</p>
                                                </div>
                                                <div class="col pl-0 d-flex justify-content-start">
                                                    <div class="form-group">
                                                        {% for subfield in form.connection_type %}
                                                            <div class="custom-control custom-radio custom-control-inline">
                                                                <td>{{ subfield(class="custom-control-input") }}</td>
                                                                <td>{{ subfield.label(class="custom-control-label") }}</td>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Liquidity radio button -->
                                            <div class="row d-none">
                                                <div class="col-auto pr-0">
                                                    <p class="font-weight-bold fixed-min-width">Liquidity</p>
                                                </div>
                                                <div class="col pl-0 d-flex justify-content-start">
                                                    <div class="form-group">
                                                        {% for subfield in form.liquidity %}
                                                            <div class="custom-control custom-radio custom-control-inline">
                                                                <td>{{ subfield(class="custom-control-input") }}</td>
                                                                <td>{{ subfield.label(class="custom-control-label") }}</td>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Exchanges checkboxes -->
                                            <div id="exchange-options"class="row">
                                                <div class="col-auto pt-1 pr-0">
                                                    <p class="font-weight-bold fixed-min-width">Exchanges</p>
                                                </div>
                                                <!-- Real form field. Not displayed, filled with JS -->
                                                <div class="form-group d-none">
                                                    {{ form.exchanges(size=40) }}
                                                </div>
                                                <!-- Exchanges checkboxes. Used to populate form -->
                                                <div class="col pl-0">
                                                    <div class="row no-gutters">
                                                        <div class="col">
                                                            <button id="select-all-btn" type="button" class="btn btn-dark-grey ml-0 px-2 py-1">Select All</button>
                                                            <button id="deselect-all-btn" type="button" class="btn btn-dark-grey px-2 py-1">Clear All</button>
                                                        </div>
                                                    </div>
                                                    <div class="row no-gutters">
                                                        {% for exch in exchanges %}
                                                            <div class="col-4 col-md-3 col-lg-2">
                                                                <div class="custom-control custom-checkbox">
                                                                    {% if exch in user_exchanges %}
                                                                        <input type="checkbox" class="custom-control-input" id="exch-{{ exch }}" checked>
                                                                    {% else %}
                                                                        <input type="checkbox" class="custom-control-input" id="exch-{{ exch }}">
                                                                    {% endif %}
                                                                    <label class="custom-control-label" for="exch-{{ exch }}">{{ exch }}</label>
                                                                </div>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Fees options -->
                                    <div class="row no-gutters mt-2 mt-lg-3">
                                        <div class="col d-flex justify-content-start">
                                            <a class="text-white" data-toggle="collapse" href="#fee-options-collapse" role="button" aria-expanded="false" aria-controls="fee-options-collapse"><span>Fee settings<i class="fa fa-chevron-down px-2" aria-hidden="true"></i></span></a>
                                        </div>
                                    </div>
                                    <div id="fee-options-collapse" class="collapse my-2">
                                        <div id="fee-options" class="row pt-2">
                                            <div class="col">
                                                <!-- CEP promos -->
                                                <div class="row">
                                                    <div class="col-auto pr-0">
                                                        <p class="font-weight-bold fixed-min-width">CEP Promos!</p>
                                                    </div>
                                                    <div class="col pl-0 d-flex justify-content-start">
                                                        <div class="form-group">
                                                            <div class="row no-gutters">
                                                                {% for subfield in form.cep_promos %}
                                                                    <div class="col-12 col-sm-auto">
                                                                        <div class="custom-control custom-radio custom-control-inline">
                                                                            <td>{{ subfield(class="custom-control-input") }}</td>
                                                                            <td>{{ subfield.label(class="custom-control-label") }}</td>
                                                                        </div>
                                                                    </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Default fee option -->
                                                <div class="row">
                                                    <div class="col-auto pr-0">
                                                        <p class="font-weight-bold fixed-min-width">Default fee</p>
                                                    </div>
                                                    <div class="col pl-0 d-flex justify-content-start">
                                                        <div class="form-group">
                                                            <div class="row no-gutters">
                                                                {% for subfield in form.default_fee %}
                                                                    <div class="col-12 col-sm-auto">
                                                                        <div class="custom-control custom-radio custom-control-inline">
                                                                            <td>{{ subfield(class="custom-control-input") }}</td>
                                                                            <td>{{ subfield.label(class="custom-control-label") }}</td>
                                                                        </div>
                                                                    </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Binance fees option -->
                                                <div class="row">
                                                    <div class="col-auto pr-0">
                                                        <p class="font-weight-bold fixed-min-width">Binance fees</p>
                                                    </div>
                                                    <div class="col pl-0 d-flex justify-content-start">
                                                        <div class="form-group">
                                                            <div class="row no-gutters">
                                                                {% for subfield in form.binance_fee %}
                                                                    <div class="col-12 col-sm-auto">
                                                                        <div class="custom-control custom-radio custom-control-inline">
                                                                            <td>{{ subfield(class="custom-control-input") }}</td>
                                                                            <td>{{ subfield.label(class="custom-control-label") }}</td>
                                                                        </div>
                                                                    </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>


            {% if path_results == -1 %}
                <div id="intro" class="row d-flex justify-content-center">
                    <div class="col-11 col-md-10 col-lg-8 col-xl-6 text-center">
                        <!-- Heading -->
                        <p class="display-4 font-weight-bold white-text mt-5 pt-5 mb-2">Crypto Exchange Path</p>
                        <hr class="hr-light">
                        <!-- Description -->
                        <h3 class="display-5 text-center white-text my-4">Find the cheapest way to exchange two cryptoassets</h3>
                        <hr class="hr-light mb-4">
                        <p class="lead white-text my-3">New sites and exciting functionalities added to our engine every week</p>
                        <p class="lead white-text my-3">Enjoy it!</p>
                    </div>
                </div>
            {% endif %}



            <!--Section: Results-->
            <section id="results">

                <div class="container">
                    <div class="row no-gutters d-flex justify-content-center">
                        <div class="col-12 col-md-10 col-lg-8 col-xl-7">

                            {% if paths %}
                                <h5 class="text-white mt-3 mb-2">Crypto Exchange Paths <small class="">({{ path_results }} results)</small></h5>
                            {% elif path_results == 0 %}
                                <p class="text-center lead white-text mt-4 mb-3">Ops!!</p>
                                <p class="text-center lead white-text my-3">We did not manage to find any exchange paths for that search...</p>
                                <p class="text-center lead white-text mb-0">Please, try with a less restrictive search</p>
                                <p class="text-center lead white-text mt-0">(e.g. non top-ranked coins usually need two connections to get results).</p>
                            {% endif %}

                            {% for path in paths %}
                                <div class="card mb-2 mb-sm-3">
                                    <div class="card-header px-0 py-2" id="headingOne">
                                                    <!-- Origin -->
                                                    <div class="d-inline-block pl-2 pl-sm-3 pl-lg-4" style="width: 17%">
                                                        {% if path.origin.exchange.id != path.hop_1.exchange.id %}
                                                            <div class="d-block d-flex align-items-center">
                                                                <img class="mr-1 mr-sm-2 img-exchange-lg" src="/static/img/exchanges/20/{{ path.origin.exchange.img_fn }}" alt="">
                                                                <span class="orig-dest-format">{{ path.origin.exchange.name }}</span>
                                                            </div>
                                                            <div class="d-block d-flex align-items-center path-format mt-2">
                                                                <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.origin.coin.local_fn }}" alt="">
                                                                <small>{{ path.origin.coin.symbol }}<i class="fa fa-long-arrow-right pl-1 pl-sm-2" aria-hidden="true"></i></small>
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                    <!-- Hop 1 -->
                                                    <div class="d-inline-block" style="width: 25%">
                                                        <div class="d-block d-flex align-items-center">
                                                            <img class="mr-1 mr-sm-2 img-exchange-lg" src="/static/img/exchanges/20/{{ path.hop_1.exchange.img_fn }}" alt="">
                                                            <span class="exchange-format">{{ path.hop_1.exchange.name }}</span>
                                                        </div>
                                                        <div class="d-block d-flex align-items-center mt-2">
                                                            <small class="d-flex align-items-center path-format">
                                                                <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.hop_1.trade.sell_coin.local_fn }}" alt="">
                                                                <span>{{ path.hop_1.trade.sell_coin.symbol }}</span>
                                                                <i class="fa fa-exchange mx-1 mx-sm-2" aria-hidden="true"></i>
                                                                <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.hop_1.trade.buy_coin.local_fn }}" alt="">
                                                                <span>{{ path.hop_1.trade.buy_coin.symbol }}</span>
                                                                {% if path.hop_2 %}
                                                                    {% if path.hop_1.exchange.id == path.hop_2.exchange.id %}
                                                                        <i class="fa fa-exchange mx-1 mx-sm-2" aria-hidden="true"></i>
                                                                        <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.hop_2.trade.buy_coin.local_fn }}" alt="">
                                                                        <span>{{ path.hop_2.trade.buy_coin.symbol }}</span>
                                                                        {% if path.hop_1.exchange.id != path.destination.exchange.id %}
                                                                            <i class="fa fa-long-arrow-right pl-1 pl-sm-2" aria-hidden="true"></i>
                                                                        {% endif %}
                                                                    {% else %}
                                                                        <i class="fa fa-long-arrow-right pl-1 pl-sm-2" aria-hidden="true"></i>
                                                                    {% endif %}
                                                                {% else %}
                                                                    {% if path.hop_1.exchange.id != path.destination.exchange.id %}
                                                                        <i class="fa fa-long-arrow-right pl-1 pl-sm-2" aria-hidden="true"></i>
                                                                    {% endif %}
                                                                {% endif %}
                                                            </small>
                                                        </div>
                                                    </div>
                                                    <!-- Hop 2 -->
                                                    <div class="d-inline-block" style="width: 25%">
                                                        {% if path.hop_2 and path.hop_1.exchange.id != path.hop_2.exchange.id %}
                                                            <div class="d-block d-flex align-items-center">
                                                                <img class="mr-1 mr-sm-2 img-exchange-lg" src="/static/img/exchanges/20/{{ path.hop_2.exchange.img_fn }}" alt="">
                                                                <span class="exchange-format">{{ path.hop_2.exchange.name }}</span>
                                                            </div>
                                                            <div class="d-block d-flex align-items-center mt-2">
                                                                <small class="d-flex align-items-center path-format">
                                                                    <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.hop_2.trade.sell_coin.local_fn }}" alt="">
                                                                    <span>{{ path.hop_2.trade.sell_coin.symbol }}</span>
                                                                    <i class="fa fa-exchange mx-1 mx-sm-2" aria-hidden="true"></i>
                                                                    <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.hop_2.trade.buy_coin.local_fn }}" alt="">
                                                                    <span>{{ path.hop_2.trade.buy_coin.symbol }}</span>
                                                                    {% if path.hop_2.exchange.id != path.destination.exchange.id %}
                                                                        <i class="fa fa-long-arrow-right pl-1 pl-sm-2" aria-hidden="true"></i>
                                                                    {% endif %}
                                                                </small>
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                    <!-- Destination -->
                                                    <div class="d-inline-block" style="width: 17%">
                                                        {% if (not path.hop_2 and path.hop_1.exchange.id != path.destination.exchange.id) or (path.hop_2 and path.hop_2.exchange.id != path.destination.exchange.id) %}
                                                            <div class="d-block d-flex align-items-center">
                                                                <img class="mr-1 mr-sm-2 img-exchange-lg" src="/static/img/exchanges/20/{{ path.destination.exchange.img_fn }}" alt="">
                                                                <span class="orig-dest-format">{{ path.destination.exchange.name }}</span>
                                                            </div>
                                                            <div class="d-block d-flex align-items-center mt-2">
                                                                <img class="mr-1 img-coin" src="/static/img/coins/16/{{ path.destination.coin.local_fn }}" alt="">
                                                                <small>{{ path.destination.coin.symbol }}</small>
                                                            </div>
                                                        {% else %}
                                                            <div class="d-block d-flex align-items-center">
                                                                <small class="font-weight-bold"> </small>
                                                            </div>
                                                            <div class="d-block d-flex align-items-center mt-2">
                                                                <small> </small>
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                    <!-- TOTAL COLUMN -->
                                                    <div class="d-inline-block border-left" style="width: 12%">
                                                        <div class="d-block d-flex justify-content-center pl-md-2">
                                                            <p class="font-weight-bold mb-0">{{ path.get_total_fees(curr) }}</p>
                                                        </div>
                                                        <div class="d-block d-flex justify-content-center pl-md-2">
                                                            <a data-toggle="collapse" href="#{{ path.id }}" role="button" aria-expanded="false" aria-controls="{{ path.id }}"><i class="fa fa-chevron-down" aria-hidden="true"></i></a>
                                                        </div>
                                                    </div>
                                        <!-- </div> -->
                                    </div>







                                    <!-- COLLAPSED INFORMATION -->
                                    <div id="{{ path.id }}" class="collapse">
                                        <div class="card-body px-0 py-2">
                                            <p class="card-title font-weight-bold ml-3 smaller-font">Path details</p>

                                            <!-- 1st Steps: ORIGIN. If Origin != Exch.1, transfer from Origin to Exch1 -->
                                            {% if path.origin.exchange.id != path.hop_1.exchange.id %}
                                                <div class="row no-gutters pl-3 mt-2 mb-4 smaller-font path-format">
                                                    <div class="col-auto px-1">
                                                        <i class="fa fa-arrow-circle-right fa-lg" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="col-3 pl-2">
                                                        {% if path.origin.exchange.id == gen_wallet %}
                                                            <span>Transfer your <b>{{ path.origin.coin.symbol }}</b> from <b>your wallet</b> to <b>{{ path.hop_1.exchange.name }}</b>.</span>
                                                        {% else %}
                                                            <span>Transfer your <b>{{ path.origin.coin.symbol }}</b> from <b>{{ path.origin.exchange.name }}</b> to <b>{{ path.hop_1.exchange.name }}</b>.</span>
                                                        {% endif %}
                                                    </div>
                                                    <div class="col">
                                                        <div class="row no-gutters justify-content-center">
                                                            <div class="col-11 col-sm-10">
                                                                <div class="row no-gutters">
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.origin.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.origin.exchange.name }}</span>
                                                                            </div>
                                                                            {% if path.origin.exchange.id != gen_wallet %}
                                                                                <span class="text-right">{{ path.origin.amount_str }}</span>
                                                                            {% else %}
                                                                                <a class="no-link-tooltip text-right" href="#" data-toggle="tooltip" data-placement="top" title="Consider your wallet fees when choosing to right amount to transfer.">{{ path.origin.amount_str }}</a>
                                                                            {% endif %}
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-2 d-flex align-items-center justify-content-center">
                                                                        <i class="fa fa-long-arrow-right fa-lg pl-2 pl-md-4" aria-hidden="true"></i>
                                                                    </div>
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_1.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.hop_1.exchange.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ path.hop_1.trade.sell_amt_str }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-2 border-left">
                                                        {% if path.origin.exchange.id != gen_wallet %}
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 font-weight-bold text-right">{{ path.origin.withdraw_fee }} {{ path.origin.coin.symbol }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 text-right">{{ path.fee_to_currency(path.origin.withdraw_fee, path.origin.coin.id) }}</span>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            {% endif %}

                                            <!-- # EXCHANGE 1 -->
                                            <!-- # 2nd Step: Trade Exch 1 -->
                                            <div class="row no-gutters pl-3 mb-4 smaller-font path-format">
                                                <div class="col-auto px-1">
                                                    <i class="fa fa-arrow-circle-right fa-lg" aria-hidden="true"></i>
                                                </div>
                                                <div class="col-3 pl-2">
                                                    <span>In <b>{{ path.hop_1.exchange.name }}</b>, trade your <b>{{ path.hop_1.trade.sell_coin.symbol }}</b> for <b>{{ path.hop_1.trade.buy_coin.symbol }}</b>.</span>
                                                </div>
                                                <div class="col">
                                                    <div class="row no-gutters justify-content-center">
                                                        <div class="col-11 col-sm-10">
                                                            <div class="row no-gutters">
                                                                <div class="col-5">
                                                                    <div class="d-flex flex-column justify-content-end">
                                                                        <div class="d-flex align-items-center justify-content-end">
                                                                            <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_1.exchange.img_fn }}" alt="">
                                                                            <span class="font-weight-bold">{{ path.hop_1.exchange.name }}</span>
                                                                        </div>
                                                                        <span class="text-right">{{ path.hop_1.trade.sell_amt_str }}</span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-2 d-flex align-items-center justify-content-center">
                                                                    <i class="fa fa-exchange fa-lg pl-2 pl-md-4" aria-hidden="true"></i>
                                                                </div>
                                                                <div class="col-5">
                                                                    <div class="d-flex flex-column justify-content-end">
                                                                        <div class="d-flex align-items-center justify-content-end">
                                                                            <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_1.exchange.img_fn }}" alt="">
                                                                            <span class="font-weight-bold">{{ path.hop_1.exchange.name }}</span>
                                                                        </div>
                                                                        <span class="text-right">{{ path.hop_1.trade.buy_amt_str }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-2 border-left">
                                                    <div class="row no-gutters pr-2">
                                                        <div class="col d-flex justify-content-end">
                                                            <span class="mb-0 font-weight-bold text-right">{{ path.hop_1.trade.fee_amt_str }}</span>
                                                        </div>
                                                    </div>
                                                    <div class="row no-gutters pr-2">
                                                        <div class="col d-flex justify-content-end">
                                                            <span class="mb-0 text-right">{{ path.fee_to_currency(path.hop_1.trade.fee_amt, path.hop_1.trade.fee_coin.id) }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- # 3rd Step: Transfer from Exch1 to Exch2 / Destination / nowhere -->
                                            {% if (not path.hop_2 and path.hop_1.exchange.id != path.destination.exchange.id)
                                                or (path.hop_2 and path.hop_1.exchange.id != path.hop_2.exchange.id) %}
                                                {% if not path.hop_2 and path.hop_1.exchange.id != path.destination.exchange.id %}
                                                    {% set step2b_dest = path.destination.exchange %}
                                                    {% set step2b_dest_amt = path.destination.amount_str %}
                                                {% else %}
                                                    {% set step2b_dest = path.hop_2.exchange %}
                                                    {% set step2b_dest_amt = path.hop_2.trade.sell_amt_str %}
                                                {% endif %}
                                                {% set step2b_dest_name = step2b_dest.name %}
                                                {% if step2b_dest.id == gen_wallet %}
                                                    {% set step2b_dest_name = 'your wallet' %}
                                                {% endif %}
                                                <div class="row no-gutters pl-3 mb-4 smaller-font path-format">
                                                    <div class="col-auto px-1">
                                                        <i class="fa fa-arrow-circle-right fa-lg" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="col-3 pl-2">
                                                        <span>Transfer your <b>{{ path.hop_1.trade.buy_coin.symbol }}</b> from <b>{{ path.hop_1.exchange.name }}</b> to <b>{{ step2b_dest_name }}</b>.</span>
                                                    </div>
                                                    <div class="col">
                                                        <div class="row no-gutters justify-content-center">
                                                            <div class="col-11 col-sm-10">
                                                                <div class="row no-gutters">
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_1.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.hop_1.exchange.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ path.hop_1.trade.buy_amt_str }}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-2 d-flex align-items-center justify-content-center">
                                                                        <i class="fa fa-long-arrow-right fa-lg pl-2 pl-md-4" aria-hidden="true"></i>
                                                                    </div>
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ step2b_dest.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ step2b_dest.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ step2b_dest_amt }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-2 border-left">
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 font-weight-bold text-right">{{ path.hop_1.withdraw_fee }} {{ path.hop_1.trade.buy_coin.symbol }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 text-right">{{ path.fee_to_currency(path.hop_1.withdraw_fee, path.hop_1.trade.buy_coin.id) }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}

                                            <!-- # EXCHANGE 2 -->
                                            <!-- # 4th Step: Trade in Exch 2. -->
                                            {% if path.hop_2 %}
                                                <div class="row no-gutters pl-3 mb-4 smaller-font path-format">
                                                    <div class="col-auto px-1">
                                                        <i class="fa fa-arrow-circle-right fa-lg" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="col-3 pl-2">
                                                        <span>In <b>{{ path.hop_2.exchange.name }}</b>, trade your <b>{{ path.hop_2.trade.sell_coin.symbol }}</b> for <b>{{ path.hop_2.trade.buy_coin.symbol }}</b>.</span>
                                                    </div>
                                                    <div class="col">
                                                        <div class="row no-gutters justify-content-center">
                                                            <div class="col-11 col-sm-10">
                                                                <div class="row no-gutters">
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_2.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.hop_2.exchange.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ path.hop_2.trade.sell_amt_str }}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-2 d-flex align-items-center justify-content-center">
                                                                        <i class="fa fa-exchange fa-lg pl-2 pl-md-4" aria-hidden="true"></i>
                                                                    </div>
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_2.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.hop_2.exchange.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ path.hop_2.trade.buy_amt_str }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-2 border-left">
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 font-weight-bold text-right">{{ path.hop_2.trade.fee_amt_str }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 text-right">{{ path.fee_to_currency(path.hop_2.trade.fee_amt, path.hop_2.trade.fee_coin.id) }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}

                                            <!-- # 5th Step: Transfer from Exch2 to Destination (if it applies) -->
                                            {% if path.hop_2 and path.hop_2.exchange.id != path.destination.exchange.id %}
                                                <div class="row no-gutters pl-3 mb-4 smaller-font path-format">
                                                    <div class="col-auto px-1">
                                                        <i class="fa fa-arrow-circle-right fa-lg" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="col-3 pl-2">
                                                        {% if path.destination.exchange.id == gen_wallet %}
                                                            <span>Transfer your <b>{{ path.hop_2.trade.buy_coin.symbol }}</b> from <b>{{ path.hop_2.exchange.name }}</b> to <b>your wallet</b>.</span>
                                                        {% else %}
                                                            <span>Transfer your <b>{{ path.hop_2.trade.buy_coin.symbol }}</b> from <b>{{ path.hop_2.exchange.name }}</b> to <b>{{ path.destination.exchange.name }}</b>.</span>
                                                        {% endif %}
                                                    </div>
                                                    <div class="col">
                                                        <div class="row no-gutters justify-content-center">
                                                            <div class="col-11 col-sm-10">
                                                                <div class="row no-gutters">
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.hop_2.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.hop_2.exchange.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ path.hop_2.trade.buy_amt_str }}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-2 d-flex align-items-center justify-content-center">
                                                                        <i class="fa fa-long-arrow-right fa-lg pl-2 pl-md-4" aria-hidden="true"></i>
                                                                    </div>
                                                                    <div class="col-5">
                                                                        <div class="d-flex flex-column justify-content-end">
                                                                            <div class="d-flex align-items-center justify-content-end">
                                                                                <img class="img-exchange-sm mr-1 mr-sm-2" src="/static/img/exchanges/16/{{ path.destination.exchange.img_fn }}" alt="">
                                                                                <span class="font-weight-bold">{{ path.destination.exchange.name }}</span>
                                                                            </div>
                                                                            <span class="text-right">{{ path.destination.amount_str }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-2 border-left">
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 font-weight-bold text-right">{{ path.hop_2.withdraw_fee }} {{ path.hop_2.trade.buy_coin.symbol }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="row no-gutters pr-2">
                                                            <div class="col d-flex justify-content-end">
                                                                <span class="mb-0 text-right">{{ path.fee_to_currency(path.hop_2.withdraw_fee, path.hop_2.trade.buy_coin.id) }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}

                                        </div>
                                    </div>


                                </div>
                            {% endfor %}

                        </div>
                    </div>

                </div>

            </section>

        </main>


        <!-- Footer -->
        <footer class="page-footer font-small mt-3">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 py-2">
                        <div class="py-3 flex-center">
                            <!-- Facebook -->
                            <a class="fb-ic">
                          <i class="fa fa-facebook fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                        </a>
                            <!-- Twitter -->
                            <a class="tw-ic">
                          <i class="fa fa-twitter fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                        </a>
                            <!--Linkedin -->
                            <a class="li-ic">
                          <i class="fa fa-linkedin fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                        </a>
                            <!--Instagram-->
                            <a class="ins-ic">
                          <i class="fa fa-instagram fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                        </a>
                            <!--Pinterest-->
                            <a class="pin-ic">
                          <i class="fa fa-pinterest fa-lg white-text fa-2x"> </i>
                        </a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
            <!-- Footer Elements -->



        <!-- MODALS -->

        <!-- Processing Modal -->
        <div class="modal fade" id="processing-modal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" data-backdrop='true'>
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div id="cssload-pgloading">
                    <div class="cssload-loadingwrap">
                        <ul class="cssload-bokeh">
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feedback Modal -->
        <div class="modal fade" id="modalFeedbackForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-modal-open={{open_feedback_modal}}>
            <div class="modal-dialog modal-lg modal-notify modal-info" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <p class="heading lead font-weight-bold">Send Feedback</p>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" class="white-text">&times;</span>
                        </button>
                    </div>
                    <form id="feedback-form" method="POST" action="">
                        {{ feedback_form.hidden_tag() }}
                        <div class="modal-body mx-3">
                            <h5 class="font-weight-bold mt-3 mb-3 text-center">Did you get any errors while using the engine?</h5>
                            <h5 class="font-weight-bold mb-3 text-center">Any missing functionality you would like us to add?</h5>
                            <h5 class="font-weight-bold mb-3 text-center">Let us know what you think!</h5>
                            <h5 class="font-weight-bold mb-5 text-center">We are working hard to improve our site every day. Your feedback is priceless for us...</h5>
                            <div class="form-group mb-3">
                                <!-- <i class="fa fa-user fa-lg prefix grey-text d-inline"></i> -->
                                <!-- {{ feedback_form.topic.label(class="form-control-label text-bigger") }} -->
                                {% if feedback_form.topic.errors %}
                                    {{ feedback_form.topic(class="form-control d-inline is-invalid", type="text", autocomplete="off") }}
                                    <div class="invalid-feedback">
                                        {% for error in feedback_form.topic.errors %}
                                            <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    {{ feedback_form.topic(class="form-control d-inline", type="text", placeholder="Location", autocomplete="off") }}
                                {% endif %}
                            </div>
                            <div class="md-form mb-5">
                                <i class="fa fa-tag prefix grey-text"></i>
                                {% if feedback_form.subject.errors %}
                                    {{ feedback_form.subject(id="form32", class="form-control is-invalid", type="text", autocomplete="off") }}
                                    <div class="invalid-feedback">
                                        {% for error in feedback_form.subject.errors %}
                                            <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    {{ feedback_form.subject(id="form32", class="form-control", type="text", autocomplete="off") }}
                                {% endif %}
                                <label data-error="wrong" data-success="right" for="form32">Subject</label>
                            </div>
                            <div class="md-form">
                                <i class="fa fa-pencil prefix grey-text"></i>
                                {% if feedback_form.detail.errors %}
                                    {{ feedback_form.detail(class="form-control is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in feedback_form.detail.errors %}
                                            <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    {{ feedback_form.detail(id="form8", class="md-textarea form-control", rows="4", type="text") }}
                                {% endif %}
                                <label data-error="wrong" data-success="right" for="form8">Your feedback</label>
                            </div>
                        </div>
                        <div class="modal-footer d-flex justify-content-center">
                            <div class="form-group">
                                {{ feedback_form.feedback_submit(class="btn btn-dark-grey") }}
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>


    </div>

    <!-- SCRIPTS -->
    <!-- JQuery -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/mdb.min.js') }}"></script>
    <!-- typeahead -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap3-typeahead.min.js') }}"></script>
    <!-- Site styles -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/main.js') }}"></script>
    <!-- Tests -->
    <!-- <script type="text/javascript" src="{{ url_for('static', filename='js/tests.js') }}"></script> -->


</body>
</html>
